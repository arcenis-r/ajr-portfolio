<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Arcenis Rojas">
<meta name="dcterms.date" content="2024-01-25">

<title>Arcenis Rojas - Topic Modeling with R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Arcenis Rojas</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../ce-dashboards.html"> 
<span class="menu-text">CE Dashboards</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Personal Projects</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/arcenisrojas" target="_blank"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/arcenis-r" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Topic Modeling with R</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">text analysis</div>
                <div class="quarto-category">topic modeling</div>
                <div class="quarto-category">data science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Arcenis Rojas </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 25, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#downloading-the-abstract-data" id="toc-downloading-the-abstract-data" class="nav-link" data-scroll-target="#downloading-the-abstract-data">Downloading the abstract data</a></li>
  <li><a href="#tidy-the-data" id="toc-tidy-the-data" class="nav-link" data-scroll-target="#tidy-the-data">Tidy the data</a></li>
  <li><a href="#modeling" id="toc-modeling" class="nav-link" data-scroll-target="#modeling">Modeling</a></li>
  <li><a href="#choosing-a-number-of-topics" id="toc-choosing-a-number-of-topics" class="nav-link" data-scroll-target="#choosing-a-number-of-topics">Choosing a number of topics</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>For this project I’ll be following an example of performing topic modeling with R using the Tidytext format introduced by Julia Silge and David Robinson in their <a href="https://www.tidytextmining.com/index.html">“Text Mining with R! A Tidy Approach”</a>. And I’ll be using abstracts submitted by <a href="https://www.jhu.edu/">Johns Hopkins University</a> for funding to the <a href="https://heal.nih.gov/">NIH HEAL Initiative</a>. The list of funded projects can be found at <a href="https://heal.nih.gov/funding/awarded" class="uri">https://heal.nih.gov/funding/awarded</a>. A benefit of using this data is that it doesn’t require much cleaning as Twitter text might. For the purposes of this demonstration I won’t do any data cleaning. The objective will be to find the optimal number of topics to which to attribute the abstracts. I’ll be using the <code>tidyverse</code> and <code>tidytext</code> packages for wrangling, the <code>stm</code> package for modeling, the <code>janitor</code> package for cleaning column names (but I won’t load it because I’m only going to use it once), the <code>knitr</code> package for table formatting, and the <code>pacman</code> package to load my packages (also only used once).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, tidytext, stm, knitr, gt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="downloading-the-abstract-data" class="level2">
<h2 class="anchored" data-anchor-id="downloading-the-abstract-data">Downloading the abstract data</h2>
<p>I’ll first download the data from the <a href="&quot;https://heal.nih.gov/funding/awarded/export?combine=johns hopkins&amp;_format=csv&quot;">NIH’s Funded Projects page</a> and filter for John’s Hopkins. The code for this is below, though, I will not run it because the data change as proposals are submitted. Instead I’ll download the filtered data to my hard drive and the ensuing analysis will be based on the data available as of this writing (January 25, 2024).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Not run</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">read_csv</span>(</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="st">"https://heal.nih.gov/funding/awarded/export?combine=johns%20hopkins&amp;_format=csv"</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>) <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">write_csv</span>(<span class="fu">file.path</span>(data_dir, <span class="st">"jh-data.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now I’ll read that data in and just look at the column names to start familiarizing myself with the data</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>jh_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(data_dir, <span class="st">"jh-data.csv"</span>))</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">glimpse</span>(jh_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 30
Columns: 10
$ `Project #`           &lt;chr&gt; "1R01DA059473-01", "1RF1NS134549-01", "5U54DA049…
$ `Project Title`       &lt;chr&gt; "Sleep and Circadian Rhythm Phenotypes and Mecha…
$ `Research Focus Area` &lt;chr&gt; "New Strategies to Prevent and Treat Opioid Addi…
$ `Research Program`    &lt;chr&gt; "Sleep Dysfunction as a Core Feature of Opioid U…
$ `Administering IC(s)` &lt;chr&gt; "NIDA", "NINDS", "NIDA", "NIAMS", "NIDA", "NIDA"…
$ `Institution(s)`      &lt;chr&gt; "JOHNS HOPKINS UNIVERSITY", "JOHNS HOPKINS UNIVE…
$ `Investigator(s)`     &lt;chr&gt; "HUHN, ANDREW S (contact); RABINOWITZ, JILL ALEX…
$ `Location(s)`         &lt;chr&gt; "Baltimore, MD", "Baltimore, MD", "Baltimore, MD…
$ `Year Awarded`        &lt;dbl&gt; 2023, 2023, 2023, 2023, 2022, 2022, 2022, 2022, …
$ Summary               &lt;chr&gt; "Chronic opioid use has well known effects on sl…</code></pre>
</div>
</div>
<p>It looks like there are 30 columns in the data. I’m going to clean up the column names and select only the Project # (to use as an identifier), Project Title, and Summary.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>jh_clean <span class="ot">&lt;-</span> jh_data <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">select</span>(project_number, project_title, summary)</span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">head</span>(jh_clean, <span class="dv">3</span>) <span class="sc">|&gt;</span> gt<span class="sc">::</span><span class="fu">gt</span>() <span class="co"># kable(booktabs = TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="pvhxrdsoya" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#pvhxrdsoya table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#pvhxrdsoya thead, #pvhxrdsoya tbody, #pvhxrdsoya tfoot, #pvhxrdsoya tr, #pvhxrdsoya td, #pvhxrdsoya th {
  border-style: none;
}

#pvhxrdsoya p {
  margin: 0;
  padding: 0;
}

#pvhxrdsoya .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#pvhxrdsoya .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#pvhxrdsoya .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#pvhxrdsoya .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#pvhxrdsoya .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pvhxrdsoya .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pvhxrdsoya .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#pvhxrdsoya .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#pvhxrdsoya .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#pvhxrdsoya .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#pvhxrdsoya .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#pvhxrdsoya .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#pvhxrdsoya .gt_spanner_row {
  border-bottom-style: hidden;
}

#pvhxrdsoya .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#pvhxrdsoya .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#pvhxrdsoya .gt_from_md > :first-child {
  margin-top: 0;
}

#pvhxrdsoya .gt_from_md > :last-child {
  margin-bottom: 0;
}

#pvhxrdsoya .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#pvhxrdsoya .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#pvhxrdsoya .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#pvhxrdsoya .gt_row_group_first td {
  border-top-width: 2px;
}

#pvhxrdsoya .gt_row_group_first th {
  border-top-width: 2px;
}

#pvhxrdsoya .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pvhxrdsoya .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#pvhxrdsoya .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#pvhxrdsoya .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pvhxrdsoya .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#pvhxrdsoya .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#pvhxrdsoya .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#pvhxrdsoya .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#pvhxrdsoya .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#pvhxrdsoya .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pvhxrdsoya .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pvhxrdsoya .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#pvhxrdsoya .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#pvhxrdsoya .gt_left {
  text-align: left;
}

#pvhxrdsoya .gt_center {
  text-align: center;
}

#pvhxrdsoya .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#pvhxrdsoya .gt_font_normal {
  font-weight: normal;
}

#pvhxrdsoya .gt_font_bold {
  font-weight: bold;
}

#pvhxrdsoya .gt_font_italic {
  font-style: italic;
}

#pvhxrdsoya .gt_super {
  font-size: 65%;
}

#pvhxrdsoya .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#pvhxrdsoya .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#pvhxrdsoya .gt_indent_1 {
  text-indent: 5px;
}

#pvhxrdsoya .gt_indent_2 {
  text-indent: 10px;
}

#pvhxrdsoya .gt_indent_3 {
  text-indent: 15px;
}

#pvhxrdsoya .gt_indent_4 {
  text-indent: 20px;
}

#pvhxrdsoya .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="project_number" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">project_number</th>
<th id="project_title" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">project_title</th>
<th id="summary" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">summary</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R01DA059473-01</td>
<td class="gt_row gt_left" headers="project_title">Sleep and Circadian Rhythm Phenotypes and Mechanisms Associated With Opioid Use Disorder Treatment Outcomes</td>
<td class="gt_row gt_left" headers="summary">Chronic opioid use has well known effects on sleep quality, including disordered breathing during sleep and other abnormalities related to circadian rhythms. However, little is known about the relationship between sleep-related symptoms and non-medical opioid use among individuals being treated for opioid use disorder. This longitudinal study aims to identify biological pathways that may account for these associations. The research will first determine associations of sleep and proxy measures of circadian rhythms with non-medical opioid use. Second, they will investigate emotional processes associated with sleep/circadian symptoms and opioid treatment outcomes.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1RF1NS134549-01</td>
<td class="gt_row gt_left" headers="project_title">Validation of a New Large-Pore Channel as a Novel Target for Neuropathic Pain</td>
<td class="gt_row gt_left" headers="summary">Activation of immune cells (microglia) in the central nervous system and neuroinflammation have emerged as key drivers of neuropathic pain. These processes can be triggered by release of ATP, the compound that provides energy to many biochemical reactions. The source and mechanism of ATP release are poorly understood but could be targets of novel treatment approaches for neuropathic pain. This project will use genetic, pharmacological, and electrophysiological approaches to determine whether a large pore channel called Swell 1 that spans the cell membrane is the source of ATP release and resulting neuropathic pain and thus could be a treatment target.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">5U54DA049110-04</td>
<td class="gt_row gt_left" headers="project_title">Data Center for Acute to Chronic Pain Biosignatures</td>
<td class="gt_row gt_left" headers="summary">Understanding the mechanisms underlying the transition to chronic pain is key to mitigating the dual epidemics of chronic pain and opioid use in the United States. As part of the National Institutes of Health-funded Acute to Chronic Pain Signatures Program, the Data Integration and Resource Center aims to This project will support a post-doctoral trainee to develop the skills and knowledge needed to pursue a successful career in clinical pain research. The research will involve integrating imaging, physiology, -omics, behavioral, and clinical data to develop biosignatures for the transition from acute to chronic pain, toward understanding how the nervous and immune systems affect post-surgical pain and opioid use.</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="tidy-the-data" class="level2">
<h2 class="anchored" data-anchor-id="tidy-the-data">Tidy the data</h2>
<p>In this next step I’m going to tidy the data and remove stop words. Then I’ll take a look at word frequencies and TF-IDF metrics to get an idea of what I might expect from my model.</p>
<p>I’m first going to use the <code>tidytext::unnest_tokens()</code> function to tokenize the data by single word then remove stop words from the text. I’ll also get word frequencies in this one step. Also, I’m going to drop the project title for the time being, but I’ll bring it back later.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>jh_tidy <span class="ot">&lt;-</span> jh_clean <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">mutate</span>(<span class="at">summary =</span> <span class="fu">str_c</span>(project_title, summary, <span class="at">sep =</span> <span class="st">" "</span>)) <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">select</span>(<span class="sc">-</span>project_title) <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">unnest_tokens</span>(word, summary, <span class="at">token =</span> <span class="st">"words"</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="fu">count</span>(project_number, word)</span>
<span id="cb6-7"><a href="#cb6-7"></a></span>
<span id="cb6-8"><a href="#cb6-8"></a>jh_tidy <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="soxjjyhffb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#soxjjyhffb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#soxjjyhffb thead, #soxjjyhffb tbody, #soxjjyhffb tfoot, #soxjjyhffb tr, #soxjjyhffb td, #soxjjyhffb th {
  border-style: none;
}

#soxjjyhffb p {
  margin: 0;
  padding: 0;
}

#soxjjyhffb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#soxjjyhffb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#soxjjyhffb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#soxjjyhffb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#soxjjyhffb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#soxjjyhffb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#soxjjyhffb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#soxjjyhffb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#soxjjyhffb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#soxjjyhffb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#soxjjyhffb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#soxjjyhffb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#soxjjyhffb .gt_spanner_row {
  border-bottom-style: hidden;
}

#soxjjyhffb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#soxjjyhffb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#soxjjyhffb .gt_from_md > :first-child {
  margin-top: 0;
}

#soxjjyhffb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#soxjjyhffb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#soxjjyhffb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#soxjjyhffb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#soxjjyhffb .gt_row_group_first td {
  border-top-width: 2px;
}

#soxjjyhffb .gt_row_group_first th {
  border-top-width: 2px;
}

#soxjjyhffb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#soxjjyhffb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#soxjjyhffb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#soxjjyhffb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#soxjjyhffb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#soxjjyhffb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#soxjjyhffb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#soxjjyhffb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#soxjjyhffb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#soxjjyhffb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#soxjjyhffb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#soxjjyhffb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#soxjjyhffb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#soxjjyhffb .gt_left {
  text-align: left;
}

#soxjjyhffb .gt_center {
  text-align: center;
}

#soxjjyhffb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#soxjjyhffb .gt_font_normal {
  font-weight: normal;
}

#soxjjyhffb .gt_font_bold {
  font-weight: bold;
}

#soxjjyhffb .gt_font_italic {
  font-style: italic;
}

#soxjjyhffb .gt_super {
  font-size: 65%;
}

#soxjjyhffb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#soxjjyhffb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#soxjjyhffb .gt_indent_1 {
  text-indent: 5px;
}

#soxjjyhffb .gt_indent_2 {
  text-indent: 10px;
}

#soxjjyhffb .gt_indent_3 {
  text-indent: 15px;
}

#soxjjyhffb .gt_indent_4 {
  text-indent: 20px;
}

#soxjjyhffb .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="project_number" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">project_number</th>
<th id="word" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">word</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1RF1NS113883-01</td>
<td class="gt_row gt_left" headers="word">pain</td>
<td class="gt_row gt_right" headers="n">9</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">3R01MD009063-05S1</td>
<td class="gt_row gt_left" headers="word">pain</td>
<td class="gt_row gt_right" headers="n">9</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1UG3NS115718-01</td>
<td class="gt_row gt_left" headers="word">mrgprx1</td>
<td class="gt_row gt_right" headers="n">8</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1U01HL150568-01</td>
<td class="gt_row gt_left" headers="word">sleep</td>
<td class="gt_row gt_right" headers="n">7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1U01HL150835-01</td>
<td class="gt_row gt_left" headers="word">sleep</td>
<td class="gt_row gt_right" headers="n">7</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">5U54DA049110-04</td>
<td class="gt_row gt_left" headers="word">pain</td>
<td class="gt_row gt_right" headers="n">7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R01DA059473-01</td>
<td class="gt_row gt_left" headers="word">opioid</td>
<td class="gt_row gt_right" headers="n">6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1R01DA059473-01</td>
<td class="gt_row gt_left" headers="word">sleep</td>
<td class="gt_row gt_right" headers="n">6</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R61AT012279-01</td>
<td class="gt_row gt_left" headers="word">shoulder</td>
<td class="gt_row gt_right" headers="n">6</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1U01HL150835-01</td>
<td class="gt_row gt_left" headers="word">stress</td>
<td class="gt_row gt_right" headers="n">6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The words “pain” is one of the most frequently occurring word in documents 1RF1NS113883-01 and 5U54DA049110-04 while the words “pain” and “sleep” seem to be 2 of the most frequent across documents. Let’s see how these words do in terms of how important they are in distinguishing a document from other documents.</p>
<p>I’m going to add TF-IDF metrics using the <code>tidytext::bind_tf_idf()</code> function.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>jh_tfidf <span class="ot">&lt;-</span> jh_tidy <span class="sc">|&gt;</span> <span class="fu">bind_tf_idf</span>(word, project_number, n)</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>jh_tfidf <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>tf_idf) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="qibiqrxzic" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qibiqrxzic table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qibiqrxzic thead, #qibiqrxzic tbody, #qibiqrxzic tfoot, #qibiqrxzic tr, #qibiqrxzic td, #qibiqrxzic th {
  border-style: none;
}

#qibiqrxzic p {
  margin: 0;
  padding: 0;
}

#qibiqrxzic .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qibiqrxzic .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qibiqrxzic .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qibiqrxzic .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qibiqrxzic .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qibiqrxzic .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qibiqrxzic .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qibiqrxzic .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qibiqrxzic .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qibiqrxzic .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qibiqrxzic .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qibiqrxzic .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qibiqrxzic .gt_spanner_row {
  border-bottom-style: hidden;
}

#qibiqrxzic .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qibiqrxzic .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qibiqrxzic .gt_from_md > :first-child {
  margin-top: 0;
}

#qibiqrxzic .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qibiqrxzic .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qibiqrxzic .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qibiqrxzic .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qibiqrxzic .gt_row_group_first td {
  border-top-width: 2px;
}

#qibiqrxzic .gt_row_group_first th {
  border-top-width: 2px;
}

#qibiqrxzic .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qibiqrxzic .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qibiqrxzic .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qibiqrxzic .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qibiqrxzic .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qibiqrxzic .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qibiqrxzic .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qibiqrxzic .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qibiqrxzic .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qibiqrxzic .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qibiqrxzic .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qibiqrxzic .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qibiqrxzic .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qibiqrxzic .gt_left {
  text-align: left;
}

#qibiqrxzic .gt_center {
  text-align: center;
}

#qibiqrxzic .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qibiqrxzic .gt_font_normal {
  font-weight: normal;
}

#qibiqrxzic .gt_font_bold {
  font-weight: bold;
}

#qibiqrxzic .gt_font_italic {
  font-style: italic;
}

#qibiqrxzic .gt_super {
  font-size: 65%;
}

#qibiqrxzic .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qibiqrxzic .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qibiqrxzic .gt_indent_1 {
  text-indent: 5px;
}

#qibiqrxzic .gt_indent_2 {
  text-indent: 10px;
}

#qibiqrxzic .gt_indent_3 {
  text-indent: 15px;
}

#qibiqrxzic .gt_indent_4 {
  text-indent: 20px;
}

#qibiqrxzic .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="project_number" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">project_number</th>
<th id="word" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">word</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="tf" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">tf</th>
<th id="idf" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">idf</th>
<th id="tf_idf" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">tf_idf</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">3U24TR001609-04S1</td>
<td class="gt_row gt_left" headers="word">tin</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.33333333</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">1.1337325</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">3U24TR001609-04S1</td>
<td class="gt_row gt_left" headers="word">summary</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.33333333</td>
<td class="gt_row gt_right" headers="idf">2.708050</td>
<td class="gt_row gt_right" headers="tf_idf">0.9026834</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">3U24TR001609-04S1</td>
<td class="gt_row gt_left" headers="word">supplement</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.33333333</td>
<td class="gt_row gt_right" headers="idf">2.302585</td>
<td class="gt_row gt_right" headers="tf_idf">0.7675284</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="word">intranasal</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.12500000</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.4251497</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="word">leptin</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.12500000</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.4251497</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="word">induced</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.12500000</td>
<td class="gt_row gt_right" headers="idf">2.708050</td>
<td class="gt_row gt_right" headers="tf_idf">0.3385063</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="word">respiratory</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.12500000</td>
<td class="gt_row gt_right" headers="idf">2.708050</td>
<td class="gt_row gt_right" headers="tf_idf">0.3385063</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="word">summary</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.12500000</td>
<td class="gt_row gt_right" headers="idf">2.708050</td>
<td class="gt_row gt_right" headers="tf_idf">0.3385063</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="word">depression</td>
<td class="gt_row gt_right" headers="n">1</td>
<td class="gt_row gt_right" headers="tf">0.12500000</td>
<td class="gt_row gt_right" headers="idf">2.302585</td>
<td class="gt_row gt_right" headers="tf_idf">0.2878231</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1R61AT012279-01</td>
<td class="gt_row gt_left" headers="word">shoulder</td>
<td class="gt_row gt_right" headers="n">6</td>
<td class="gt_row gt_right" headers="tf">0.08333333</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.2834331</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1RF1AG068997-01</td>
<td class="gt_row gt_left" headers="word">bone</td>
<td class="gt_row gt_right" headers="n">3</td>
<td class="gt_row gt_right" headers="tf">0.06976744</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.2372928</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1R01DA057655-01</td>
<td class="gt_row gt_left" headers="word">harm</td>
<td class="gt_row gt_right" headers="n">4</td>
<td class="gt_row gt_right" headers="tf">0.06666667</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.2267465</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R01DA057655-01</td>
<td class="gt_row gt_left" headers="word">reduction</td>
<td class="gt_row gt_right" headers="n">4</td>
<td class="gt_row gt_right" headers="tf">0.06666667</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.2267465</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">1UG3NS115718-01</td>
<td class="gt_row gt_left" headers="word">mrgprx1</td>
<td class="gt_row gt_right" headers="n">8</td>
<td class="gt_row gt_right" headers="tf">0.06557377</td>
<td class="gt_row gt_right" headers="idf">3.401197</td>
<td class="gt_row gt_right" headers="tf_idf">0.2230293</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R01DA059473-01</td>
<td class="gt_row gt_left" headers="word">sleep</td>
<td class="gt_row gt_right" headers="n">6</td>
<td class="gt_row gt_right" headers="tf">0.10169492</td>
<td class="gt_row gt_right" headers="idf">2.014903</td>
<td class="gt_row gt_right" headers="tf_idf">0.2049054</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>It’s very strange that 2 documents have the term “summary” as the only term in the summary. This is indicated by a term frequency (tf) of 1. Let’s take a look at the original text for these documents.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>jh_clean <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(</span>
<span id="cb8-3"><a href="#cb8-3"></a>    project_number <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1R61HL156248-01"</span>, <span class="st">"3U24TR001609-04S1"</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">select</span>(project_number, summary) <span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="lxepayaili" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lxepayaili table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lxepayaili thead, #lxepayaili tbody, #lxepayaili tfoot, #lxepayaili tr, #lxepayaili td, #lxepayaili th {
  border-style: none;
}

#lxepayaili p {
  margin: 0;
  padding: 0;
}

#lxepayaili .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lxepayaili .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lxepayaili .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lxepayaili .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lxepayaili .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lxepayaili .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lxepayaili .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lxepayaili .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lxepayaili .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lxepayaili .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lxepayaili .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lxepayaili .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lxepayaili .gt_spanner_row {
  border-bottom-style: hidden;
}

#lxepayaili .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lxepayaili .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lxepayaili .gt_from_md > :first-child {
  margin-top: 0;
}

#lxepayaili .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lxepayaili .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lxepayaili .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lxepayaili .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lxepayaili .gt_row_group_first td {
  border-top-width: 2px;
}

#lxepayaili .gt_row_group_first th {
  border-top-width: 2px;
}

#lxepayaili .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lxepayaili .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lxepayaili .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lxepayaili .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lxepayaili .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lxepayaili .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lxepayaili .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lxepayaili .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lxepayaili .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lxepayaili .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lxepayaili .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lxepayaili .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lxepayaili .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lxepayaili .gt_left {
  text-align: left;
}

#lxepayaili .gt_center {
  text-align: center;
}

#lxepayaili .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lxepayaili .gt_font_normal {
  font-weight: normal;
}

#lxepayaili .gt_font_bold {
  font-weight: bold;
}

#lxepayaili .gt_font_italic {
  font-style: italic;
}

#lxepayaili .gt_super {
  font-size: 65%;
}

#lxepayaili .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lxepayaili .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lxepayaili .gt_indent_1 {
  text-indent: 5px;
}

#lxepayaili .gt_indent_2 {
  text-indent: 10px;
}

#lxepayaili .gt_indent_3 {
  text-indent: 15px;
}

#lxepayaili .gt_indent_4 {
  text-indent: 20px;
}

#lxepayaili .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="project_number" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">project_number</th>
<th id="summary" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">summary</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="project_number">1R61HL156248-01</td>
<td class="gt_row gt_left" headers="summary">no summary</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="project_number">3U24TR001609-04S1</td>
<td class="gt_row gt_left" headers="summary">no summary</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>There was no summary for either of these documents! The word “summary” had a really high TF-IDF because it was the only word (“no” is a stopword and was dropped) in these documents and it likely isn’t used very frequently in other documents. This is one of the benefits of doing this kind of check before going into modeling. Interestingly, though, neither “pain” nor “stress” are in the terms with the top 15 TF-IDF values. I imagine it’s because these words occur in a lot of the documents and, therefore, would not be very useful in distinguishing one project from another. So I’ll drop the two project with no summaries and go into the modeling.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>jh_tidy <span class="ot">&lt;-</span> jh_tidy <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">filter</span>(</span>
<span id="cb9-3"><a href="#cb9-3"></a>    <span class="sc">!</span>project_number <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1R61HL156248-01"</span>, <span class="st">"3U24TR001609-04S1"</span>)</span>
<span id="cb9-4"><a href="#cb9-4"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="modeling" class="level2">
<h2 class="anchored" data-anchor-id="modeling">Modeling</h2>
<p>To be able to perform text mining of any kind, including structural topic modeling, I first need to put my data into a sparse matrix. For this I’ll use the <code>tidytext::cast_sparse()</code> function.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>jh_sparse <span class="ot">&lt;-</span> jh_tidy <span class="sc">|&gt;</span> <span class="fu">cast_sparse</span>(project_number, word, n)</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="fu">dim</span>(jh_sparse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   28 1023</code></pre>
</div>
</div>
<p>I now have a matrix of 28 and 1023 columns. There is now one column for each distinct word in my corpus of data. I’m going to create a structural model with 3 topics (number chosen arbitrarily) just to get an idea of how I might evaluate a model. I’m going to use the <code>stm::stm()</code> function and use the LDA algorithm to generate my model.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>jh_lda_3 <span class="ot">&lt;-</span> jh_sparse <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">stm</span>(<span class="at">K =</span> <span class="dv">3</span>, <span class="at">init.type =</span> <span class="st">"LDA"</span>, <span class="at">seed =</span> <span class="dv">212</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now I want to see what some of the most frequently occurring words are within each topic. For this I’m going to simply use the <code>tidy</code> method from <code>stm</code> on the model. By default, the tidy method extracts values of “beta” which tells us the probability that a word comes from a given topic.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>jh_lda_3 <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder_within</span>(term, beta, topic), beta, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Beta"</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-modeling_files/figure-html/lda_3-top-terms-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The word “pain” is in the top 2 most frequently occurring words in each topic and the word “opioid” occurs in the top 10 words of 2 of the topics. It looks like the model’s not doing a great job of separating topics based on this.</p>
<p>Another interesting metric to look at is “gamma” which is the probability that a given document is related to a given topic and this is also provided by our model output, which we can access by specifying the <code>matrix = "gamma"</code> argument in our <code>tidy()</code> function.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>jh_lda_3 <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">tidy</span>(<span class="at">matrix =</span> <span class="st">"gamma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_c</span>(<span class="st">"Topic"</span>, topic, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">factor</span>()) <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(document, gamma, <span class="at">fill =</span> topic)) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(<span class="fu">distinct</span>(jh_tidy, project_number))) <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Document"</span>, <span class="at">y =</span> <span class="st">"Gamma"</span>) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-modeling_files/figure-html/lda_3-topic-probs-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It looks like each document except for Document 16 has a high probability of coming from only 1 topic. This is pretty good considering what the beta values showed.</p>
<p>Next I’ll see if there’s a better number of topics to separate these documents into.</p>
</section>
<section id="choosing-a-number-of-topics" class="level2">
<h2 class="anchored" data-anchor-id="choosing-a-number-of-topics">Choosing a number of topics</h2>
<p>First I’m going to build a set of LDA models with values of K (number of topics) ranging from 2 to 25. I’m also going to create a hold-out dataset to calculate the heldout-likelihood metric later. This is somewhat akin to using a cross-validation holdout set in other machine learning methodologies.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>jh_tune_models <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">k =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="at">lda_mod =</span> <span class="fu">map</span>(</span>
<span id="cb15-4"><a href="#cb15-4"></a>      k,</span>
<span id="cb15-5"><a href="#cb15-5"></a>      \(x) <span class="fu">stm</span>(</span>
<span id="cb15-6"><a href="#cb15-6"></a>        jh_sparse,</span>
<span id="cb15-7"><a href="#cb15-7"></a>        <span class="at">K =</span> x,</span>
<span id="cb15-8"><a href="#cb15-8"></a>        <span class="at">init.type =</span> <span class="st">"LDA"</span>,</span>
<span id="cb15-9"><a href="#cb15-9"></a>        <span class="at">seed =</span> <span class="dv">212</span>,</span>
<span id="cb15-10"><a href="#cb15-10"></a>        <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>      )</span>
<span id="cb15-12"><a href="#cb15-12"></a>    )</span>
<span id="cb15-13"><a href="#cb15-13"></a>  )</span>
<span id="cb15-14"><a href="#cb15-14"></a></span>
<span id="cb15-15"><a href="#cb15-15"></a>heldout <span class="ot">&lt;-</span> <span class="fu">make.heldout</span>(jh_sparse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now I’m going to extract the metrics that I want to use to evaluate my model. I’m going to focus on the approach of find the value of K with high held-out likelihood and semantic coherence metrics, but I’m also interested in looking at the residual and exclusivity metrics, so I’ll keep those as well.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>jh_tune_results <span class="ot">&lt;-</span> jh_tune_models <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-3"><a href="#cb16-3"></a>    <span class="at">exclusivity =</span> <span class="fu">map</span>(lda_mod, exclusivity),</span>
<span id="cb16-4"><a href="#cb16-4"></a>    <span class="at">semantic_coherence =</span> <span class="fu">map</span>(</span>
<span id="cb16-5"><a href="#cb16-5"></a>      lda_mod,</span>
<span id="cb16-6"><a href="#cb16-6"></a>      semanticCoherence,</span>
<span id="cb16-7"><a href="#cb16-7"></a>      <span class="at">documents =</span> jh_sparse,</span>
<span id="cb16-8"><a href="#cb16-8"></a>      <span class="at">M =</span> <span class="dv">10</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>    ),</span>
<span id="cb16-10"><a href="#cb16-10"></a>    <span class="at">eval_heldout =</span> <span class="fu">map</span>(lda_mod, eval.heldout, heldout<span class="sc">$</span>missing),</span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="at">residual =</span> <span class="fu">map</span>(lda_mod, checkResiduals, jh_sparse)</span>
<span id="cb16-12"><a href="#cb16-12"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>jh_tune_results <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">transmute</span>(</span>
<span id="cb17-3"><a href="#cb17-3"></a>    k,</span>
<span id="cb17-4"><a href="#cb17-4"></a>    <span class="at">Residuals =</span> <span class="fu">map_dbl</span>(residual, <span class="st">"dispersion"</span>),</span>
<span id="cb17-5"><a href="#cb17-5"></a>    <span class="st">`</span><span class="at">Semantic coherence</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(semantic_coherence, mean),</span>
<span id="cb17-6"><a href="#cb17-6"></a>    <span class="st">`</span><span class="at">Held-out likelihood</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(eval_heldout, <span class="st">"expected.heldout"</span>),</span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="at">Exclusivity =</span> <span class="fu">map_dbl</span>(exclusivity, mean)</span>
<span id="cb17-8"><a href="#cb17-8"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>k, <span class="at">names_to =</span> <span class="st">"metrics"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(k, value, <span class="at">color =</span> metrics)) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>  <span class="fu">geom_line</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Topics"</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> metrics, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb17-14"><a href="#cb17-14"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-modeling_files/figure-html/plot-tune-results-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The highest held-out likelihood score comes from the model with <code>K = 17</code> and the highest semantic coherence comes from the model with <code>K = 20</code>, so there’s a little bit of a trade-off. In this case I’m going to go with parsimony and choose the model with <code>K = 17</code>. This model also has relatively high exclusivity. Notably, exclusivity and the residual seem to flatten out and semantic coherence increases dramatically at <code>K &gt; 10</code>.</p>
<p>Now I’m going to look at both the <code>K = 17</code> and <code>K = 20</code> models to see whether one is clearly better. I’m going to start by looking at how easily each model would predict each document to belong to a specific topic. For that, I’m going to look at the maximum values of gamma for each document. For comparison I’m going to show the same plot for the approach of maximizing semantic coherence (<code>K = 21</code>).</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>jh_tune_models <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">filter</span>(k <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>)) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="at">max_gammas =</span> <span class="fu">map</span>(</span>
<span id="cb18-5"><a href="#cb18-5"></a>      lda_mod,</span>
<span id="cb18-6"><a href="#cb18-6"></a>      \(x) <span class="fu">tidy</span>(x, <span class="at">matrix =</span> <span class="st">"gamma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>        <span class="fu">group_by</span>(document) <span class="sc">|&gt;</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>        <span class="fu">summarise</span>(<span class="at">gamma =</span> <span class="fu">max</span>(gamma), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb18-9"><a href="#cb18-9"></a>    ),</span>
<span id="cb18-10"><a href="#cb18-10"></a>    <span class="at">k_label =</span> <span class="fu">str_c</span>(<span class="st">"Number of Topics:"</span>, k, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">fct_reorder</span>(k)</span>
<span id="cb18-11"><a href="#cb18-11"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>  <span class="fu">select</span>(<span class="sc">-</span>lda_mod) <span class="sc">|&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>  <span class="fu">unnest</span>(max_gammas) <span class="sc">|&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(document, gamma, <span class="at">fill =</span> <span class="fu">factor</span>(k))) <span class="sc">+</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>) <span class="sc">+</span></span>
<span id="cb18-17"><a href="#cb18-17"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Document"</span>, <span class="at">y =</span> <span class="st">"Maximum Gamma"</span>) <span class="sc">+</span></span>
<span id="cb18-18"><a href="#cb18-18"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> k_label, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-modeling_files/figure-html/compare-gamma-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It looks like both models yield relatively high probabilities that each document corresponds to one specific topic across the board with only documents 23 and 24 having maximum gammas below 0.75, but the model with <code>K = 17</code> generally performs a bit better.</p>
<p>For the purposes of visualization I’ll look at the top 5 words defining the topics for the 17-topic model.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>jh_tune_models <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">filter</span>(k <span class="sc">==</span> <span class="dv">17</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">pluck</span>(<span class="st">"lda_mod"</span>, <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-9"><a href="#cb19-9"></a>    <span class="at">topic =</span> <span class="fu">str_c</span>(<span class="st">"Topic"</span>, topic, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">str_c</span>(<span class="st">"Topic"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">17</span>, <span class="at">sep =</span> <span class="st">" "</span>))</span>
<span id="cb19-11"><a href="#cb19-11"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb19-12"><a href="#cb19-12"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder_within</span>(term, beta, topic), beta, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Beta"</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb19-18"><a href="#cb19-18"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="topic-modeling_files/figure-html/lda_17-top-words-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The word “pain” appears in the top 5 words of 7 topics; in further analysis I might consider making this a stop word along with words like “study” and “research”. But topic 11 seems to be about joint issues given the prevalence of the words “osteoarthritis” and “knee”; topic 12 seems to be about demographics with words like “american” and “urban” in the top 5 words; and topic 17 seems to be clearly about digestion issues with words like “pain”, “ibs”, and “abdominal” in the top 5 words.</p>
<p>Finally, I’ll look at the titles grouped by each project’s maximum gamma value. You be the judge.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>jh_tune_models <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">filter</span>(k <span class="sc">==</span> <span class="dv">17</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">pluck</span>(<span class="st">"lda_mod"</span>, <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4"></a>  <span class="fu">tidy</span>(<span class="at">matrix =</span> <span class="st">"gamma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>document) <span class="sc">|&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-7"><a href="#cb20-7"></a>    <span class="at">data =</span> <span class="fu">map</span>(data,\(x) <span class="fu">slice_max</span>(x, gamma, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb20-8"><a href="#cb20-8"></a>    <span class="at">project_number =</span> <span class="fu">rownames</span>(jh_sparse)</span>
<span id="cb20-9"><a href="#cb20-9"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>  <span class="fu">unnest</span>(data) <span class="sc">|&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>  <span class="fu">left_join</span>(</span>
<span id="cb20-12"><a href="#cb20-12"></a>    jh_clean <span class="sc">|&gt;</span> <span class="fu">select</span>(project_number, project_title),</span>
<span id="cb20-13"><a href="#cb20-13"></a>    <span class="at">by =</span> <span class="st">"project_number"</span></span>
<span id="cb20-14"><a href="#cb20-14"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb20-15"><a href="#cb20-15"></a>  <span class="fu">select</span>(topic, project_title, gamma) <span class="sc">|&gt;</span></span>
<span id="cb20-16"><a href="#cb20-16"></a>  <span class="fu">mutate</span>(<span class="at">gamma =</span> <span class="fu">round</span>(gamma, <span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17"></a>  <span class="fu">arrange</span>(topic, gamma) <span class="sc">|&gt;</span></span>
<span id="cb20-18"><a href="#cb20-18"></a>  <span class="fu">gt</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="gwrvrkxqpw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gwrvrkxqpw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gwrvrkxqpw thead, #gwrvrkxqpw tbody, #gwrvrkxqpw tfoot, #gwrvrkxqpw tr, #gwrvrkxqpw td, #gwrvrkxqpw th {
  border-style: none;
}

#gwrvrkxqpw p {
  margin: 0;
  padding: 0;
}

#gwrvrkxqpw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gwrvrkxqpw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gwrvrkxqpw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gwrvrkxqpw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gwrvrkxqpw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gwrvrkxqpw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gwrvrkxqpw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gwrvrkxqpw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gwrvrkxqpw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gwrvrkxqpw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gwrvrkxqpw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gwrvrkxqpw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gwrvrkxqpw .gt_spanner_row {
  border-bottom-style: hidden;
}

#gwrvrkxqpw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gwrvrkxqpw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gwrvrkxqpw .gt_from_md > :first-child {
  margin-top: 0;
}

#gwrvrkxqpw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gwrvrkxqpw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gwrvrkxqpw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gwrvrkxqpw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gwrvrkxqpw .gt_row_group_first td {
  border-top-width: 2px;
}

#gwrvrkxqpw .gt_row_group_first th {
  border-top-width: 2px;
}

#gwrvrkxqpw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwrvrkxqpw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gwrvrkxqpw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gwrvrkxqpw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gwrvrkxqpw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwrvrkxqpw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gwrvrkxqpw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gwrvrkxqpw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gwrvrkxqpw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gwrvrkxqpw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gwrvrkxqpw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwrvrkxqpw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gwrvrkxqpw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gwrvrkxqpw .gt_left {
  text-align: left;
}

#gwrvrkxqpw .gt_center {
  text-align: center;
}

#gwrvrkxqpw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gwrvrkxqpw .gt_font_normal {
  font-weight: normal;
}

#gwrvrkxqpw .gt_font_bold {
  font-weight: bold;
}

#gwrvrkxqpw .gt_font_italic {
  font-style: italic;
}

#gwrvrkxqpw .gt_super {
  font-size: 65%;
}

#gwrvrkxqpw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gwrvrkxqpw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gwrvrkxqpw .gt_indent_1 {
  text-indent: 5px;
}

#gwrvrkxqpw .gt_indent_2 {
  text-indent: 10px;
}

#gwrvrkxqpw .gt_indent_3 {
  text-indent: 15px;
}

#gwrvrkxqpw .gt_indent_4 {
  text-indent: 20px;
}

#gwrvrkxqpw .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="topic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">topic</th>
<th id="project_title" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">project_title</th>
<th id="gamma" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">gamma</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="topic">1</td>
<td class="gt_row gt_left" headers="project_title">Validation of peripheral CGRP signaling as a target for the treatment of pain in chronic pancreatitis</td>
<td class="gt_row gt_right" headers="gamma">0.991</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">1</td>
<td class="gt_row gt_left" headers="project_title">Development of MRGPRX1 positive allosteric modulators as non-addictive therapies for neuropathic pain</td>
<td class="gt_row gt_right" headers="gamma">0.994</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">2</td>
<td class="gt_row gt_left" headers="project_title">DEVELOPMENT &amp;amp; MALLEABILITY FROM CHILDHOOD TO ADULTHOOD</td>
<td class="gt_row gt_right" headers="gamma">0.993</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">3</td>
<td class="gt_row gt_left" headers="project_title">Data Center for Acute to Chronic Pain Biosignatures</td>
<td class="gt_row gt_right" headers="gamma">0.991</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">3</td>
<td class="gt_row gt_left" headers="project_title">Social Networks among Native American caregivers participating in an evidence-based and culturally informed intergenerational intervention</td>
<td class="gt_row gt_right" headers="gamma">0.993</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">4</td>
<td class="gt_row gt_left" headers="project_title">HEALthy ORCHARD: Developing plans for a Baltimore site of the HEALthy BCD study</td>
<td class="gt_row gt_right" headers="gamma">0.989</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">5</td>
<td class="gt_row gt_left" headers="project_title">Subchondral Bone Cavities in Osteoarthritis Pain</td>
<td class="gt_row gt_right" headers="gamma">0.985</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">5</td>
<td class="gt_row gt_left" headers="project_title">Implementing and Evaluating the Impact of Novel Mobile Harm Reduction Services on Overdose Among Women who use Drugs: The SHOUT Study</td>
<td class="gt_row gt_right" headers="gamma">0.989</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">6</td>
<td class="gt_row gt_left" headers="project_title">Improving Function and Reducing Opioid Use for Patients with Chronic Low Back Pain in Rural Communities Through Improved Access to Physical Therapy Using Telerehabilitation</td>
<td class="gt_row gt_right" headers="gamma">0.992</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">6</td>
<td class="gt_row gt_left" headers="project_title">UNDERSTANDING THE INTERSECTION BETWEEN OPIOIDS AND SUICIDE THROUGH THE SOUTHWEST HUB</td>
<td class="gt_row gt_right" headers="gamma">0.993</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">7</td>
<td class="gt_row gt_left" headers="project_title">Evaluating the Role of the Orexin System in Circadian Rhythms of Sleep and Stress in Persons on Medication-Assisted Treatments for Opioid Use Disorder</td>
<td class="gt_row gt_right" headers="gamma">0.993</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">7</td>
<td class="gt_row gt_left" headers="project_title">Evaluating Suvorexant for Sleep Disturbance in Opioid Use Disorder</td>
<td class="gt_row gt_right" headers="gamma">0.993</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">8</td>
<td class="gt_row gt_left" headers="project_title">Validation of a New Large-Pore Channel as a Novel Target for Neuropathic Pain</td>
<td class="gt_row gt_right" headers="gamma">0.987</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">9</td>
<td class="gt_row gt_left" headers="project_title">The Short and Long-Term Dynamics of Opioid/Stimulant Use: Mixed Methods to Inform Overdose Prevention and Treatment Related to Polysubstance Use</td>
<td class="gt_row gt_right" headers="gamma">0.992</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">9</td>
<td class="gt_row gt_left" headers="project_title">Sympathetic-mediated sensory neuron cluster firing as a novel therapeutic target for neuropathic pain</td>
<td class="gt_row gt_right" headers="gamma">0.995</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">10</td>
<td class="gt_row gt_left" headers="project_title">7/24 Healthy Brain and Child Development National Consortium</td>
<td class="gt_row gt_right" headers="gamma">0.990</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">11</td>
<td class="gt_row gt_left" headers="project_title">A sequenced-strategy for improving outcomes in patients with knee osteoarthritis pain</td>
<td class="gt_row gt_right" headers="gamma">0.989</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">11</td>
<td class="gt_row gt_left" headers="project_title">A sequenced-strategy for improving outcomes in patients with knee osteoarthritis pain</td>
<td class="gt_row gt_right" headers="gamma">0.990</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">11</td>
<td class="gt_row gt_left" headers="project_title">Increasing Participant Diversity in a 'Sequenced-Strategy to Improve Outcomes in People with Knee Osteoarthritis Pain (SKOAP)</td>
<td class="gt_row gt_right" headers="gamma">0.991</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">11</td>
<td class="gt_row gt_left" headers="project_title">Mentorship of Junior Investigators on HEAL-SKOAP</td>
<td class="gt_row gt_right" headers="gamma">0.992</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">11</td>
<td class="gt_row gt_left" headers="project_title">A sequenced-strategy for improving outcomes in patients with knee osteoarthritis pain</td>
<td class="gt_row gt_right" headers="gamma">0.994</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">13</td>
<td class="gt_row gt_left" headers="project_title">DC Research Infrastructure Building &amp;amp; Initiative to Reach, Engage, and Retain in MOUD Patients with OUD</td>
<td class="gt_row gt_right" headers="gamma">0.754</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">13</td>
<td class="gt_row gt_left" headers="project_title">DC Research Infrastructure Building &amp;amp; Initiative to Reach, Engage, and Retain in MOUD Patients with OUD</td>
<td class="gt_row gt_right" headers="gamma">0.754</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">14</td>
<td class="gt_row gt_left" headers="project_title">Quantifying and Treating Myofascial Dysfunction in Post Stroke Shoulder Pain</td>
<td class="gt_row gt_right" headers="gamma">0.990</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">14</td>
<td class="gt_row gt_left" headers="project_title">ETHNIC DIFFERENCES IN ENDOGENOUS PAIN REGULATION: PET IMAGING OF OPIOID RECEPTORS</td>
<td class="gt_row gt_right" headers="gamma">0.993</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">15</td>
<td class="gt_row gt_left" headers="project_title">Sleep and Circadian Rhythm Phenotypes and Mechanisms Associated With Opioid Use Disorder Treatment Outcomes</td>
<td class="gt_row gt_right" headers="gamma">0.988</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="topic">16</td>
<td class="gt_row gt_left" headers="project_title">Effects of experimental sleep disruption and fragmentation on cerebral Mu-opioid receptor function, Mu-opioid receptor agonist analgesia, and abuse liability.</td>
<td class="gt_row gt_right" headers="gamma">0.991</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="topic">17</td>
<td class="gt_row gt_left" headers="project_title">Home-based transcutaneous electrical acustimulation for abdominal pain</td>
<td class="gt_row gt_right" headers="gamma">0.991</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.arcenis-r\.github\.io\/ajr-portfolio");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          trigger: 'click',
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          positionFixed: true,
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="arcenis-r/ajr-portfolio" data-repo-id="MDEwOlJlcG9zaXRvcnkxNzg3MDY3MTM=" data-category="General" data-category-id="DIC_kwDOCqbZGc4CdJXz" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark"><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb21" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb21-1"><a href="#cb21-1"></a><span class="co">---</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="an">title:</span><span class="co"> "Topic Modeling with R"</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="an">author:</span><span class="co"> "Arcenis Rojas"</span></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="an">execute:</span></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="co">  warning: false</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="co">  error: false</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="an">date:</span><span class="co"> "1/25/2024"</span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="an">categories:</span></span>
<span id="cb21-10"><a href="#cb21-10"></a><span class="co">  - text analysis</span></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="co">  - topic modeling</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="co">  - data science</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="co">---</span></span>
<span id="cb21-14"><a href="#cb21-14"></a></span>
<span id="cb21-15"><a href="#cb21-15"></a><span class="fu">## Introduction</span></span>
<span id="cb21-16"><a href="#cb21-16"></a></span>
<span id="cb21-17"><a href="#cb21-17"></a>For this project I'll be following an example of performing topic modeling with R using the Tidytext format introduced by Julia Silge and David Robinson in their <span class="co">[</span><span class="ot">"Text Mining with R! A Tidy Approach"</span><span class="co">](https://www.tidytextmining.com/index.html)</span>. And I'll be using abstracts submitted by <span class="co">[</span><span class="ot">Johns Hopkins University</span><span class="co">](https://www.jhu.edu/)</span> for funding to the <span class="co">[</span><span class="ot">NIH HEAL Initiative</span><span class="co">](https://heal.nih.gov/)</span>. The list of funded projects can be found at <span class="ot">&lt;https://heal.nih.gov/funding/awarded&gt;</span>. A benefit of using this data is that it doesn't require much cleaning as Twitter text might. For the purposes of this demonstration I won't do any data cleaning. The objective will be to find the optimal number of topics to which to attribute the abstracts. I'll be using the <span class="in">`tidyverse`</span> and <span class="in">`tidytext`</span> packages for wrangling, the <span class="in">`stm`</span> package for modeling, the <span class="in">`janitor`</span> package for cleaning column names (but I won't load it because I'm only going to use it once), the <span class="in">`knitr`</span> package for table formatting, and the <span class="in">`pacman`</span> package to load my packages (also only used once).</span>
<span id="cb21-18"><a href="#cb21-18"></a></span>
<span id="cb21-21"><a href="#cb21-21"></a><span class="in">```{r}</span></span>
<span id="cb21-22"><a href="#cb21-22"></a><span class="co">#| label: load-packages</span></span>
<span id="cb21-23"><a href="#cb21-23"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, tidytext, stm, knitr, gt)</span>
<span id="cb21-24"><a href="#cb21-24"></a><span class="in">```</span></span>
<span id="cb21-25"><a href="#cb21-25"></a></span>
<span id="cb21-26"><a href="#cb21-26"></a><span class="fu">## Downloading the abstract data</span></span>
<span id="cb21-27"><a href="#cb21-27"></a></span>
<span id="cb21-28"><a href="#cb21-28"></a>I'll first download the data from the <span class="co">[</span><span class="ot">NIH's Funded Projects page</span><span class="co">](%22https://heal.nih.gov/funding/awarded/export?combine=johns%20hopkins&amp;_format=csv%22)</span> and filter for John's Hopkins. The code for this is below, though, I will not run it because the data change as proposals are submitted. Instead I'll download the filtered data to my hard drive and the ensuing analysis will be based on the data available as of this writing (January 25, 2024).</span>
<span id="cb21-29"><a href="#cb21-29"></a></span>
<span id="cb21-32"><a href="#cb21-32"></a><span class="in">```{r}</span></span>
<span id="cb21-33"><a href="#cb21-33"></a><span class="co">#| label: declare-data-dir</span></span>
<span id="cb21-34"><a href="#cb21-34"></a><span class="co">#| include: false</span></span>
<span id="cb21-35"><a href="#cb21-35"></a></span>
<span id="cb21-36"><a href="#cb21-36"></a>data_dir <span class="ot">&lt;-</span> <span class="st">"./topic-modeling-data"</span></span>
<span id="cb21-37"><a href="#cb21-37"></a></span>
<span id="cb21-38"><a href="#cb21-38"></a><span class="in">```</span></span>
<span id="cb21-39"><a href="#cb21-39"></a></span>
<span id="cb21-42"><a href="#cb21-42"></a><span class="in">```{r}</span></span>
<span id="cb21-43"><a href="#cb21-43"></a><span class="co">#| label: show-how-download</span></span>
<span id="cb21-44"><a href="#cb21-44"></a><span class="co">#| eval: false</span></span>
<span id="cb21-45"><a href="#cb21-45"></a></span>
<span id="cb21-46"><a href="#cb21-46"></a><span class="co"># Not run</span></span>
<span id="cb21-47"><a href="#cb21-47"></a><span class="fu">read_csv</span>(</span>
<span id="cb21-48"><a href="#cb21-48"></a>  <span class="st">"https://heal.nih.gov/funding/awarded/export?combine=johns%20hopkins&amp;_format=csv"</span></span>
<span id="cb21-49"><a href="#cb21-49"></a>) <span class="sc">|&gt;</span></span>
<span id="cb21-50"><a href="#cb21-50"></a>  <span class="fu">write_csv</span>(<span class="fu">file.path</span>(data_dir, <span class="st">"jh-data.csv"</span>))</span>
<span id="cb21-51"><a href="#cb21-51"></a></span>
<span id="cb21-52"><a href="#cb21-52"></a><span class="in">```</span></span>
<span id="cb21-53"><a href="#cb21-53"></a></span>
<span id="cb21-54"><a href="#cb21-54"></a>Now I'll read that data in and just look at the column names to start familiarizing myself with the data</span>
<span id="cb21-55"><a href="#cb21-55"></a></span>
<span id="cb21-58"><a href="#cb21-58"></a><span class="in">```{r}</span></span>
<span id="cb21-59"><a href="#cb21-59"></a><span class="co">#| label: glimpse-data</span></span>
<span id="cb21-60"><a href="#cb21-60"></a></span>
<span id="cb21-61"><a href="#cb21-61"></a>jh_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(data_dir, <span class="st">"jh-data.csv"</span>))</span>
<span id="cb21-62"><a href="#cb21-62"></a><span class="fu">glimpse</span>(jh_data)</span>
<span id="cb21-63"><a href="#cb21-63"></a><span class="in">```</span></span>
<span id="cb21-64"><a href="#cb21-64"></a></span>
<span id="cb21-65"><a href="#cb21-65"></a>It looks like there are <span class="in">`r nrow(jh_data)`</span> columns in the data. I'm going to clean up the column names and select only the Project <span class="sc">\#</span> (to use as an identifier), Project Title, and Summary.</span>
<span id="cb21-66"><a href="#cb21-66"></a></span>
<span id="cb21-69"><a href="#cb21-69"></a><span class="in">```{r}</span></span>
<span id="cb21-70"><a href="#cb21-70"></a><span class="co">#| label: clean-data</span></span>
<span id="cb21-71"><a href="#cb21-71"></a></span>
<span id="cb21-72"><a href="#cb21-72"></a>jh_clean <span class="ot">&lt;-</span> jh_data <span class="sc">|&gt;</span></span>
<span id="cb21-73"><a href="#cb21-73"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb21-74"><a href="#cb21-74"></a>  <span class="fu">select</span>(project_number, project_title, summary)</span>
<span id="cb21-75"><a href="#cb21-75"></a></span>
<span id="cb21-76"><a href="#cb21-76"></a><span class="fu">head</span>(jh_clean, <span class="dv">3</span>) <span class="sc">|&gt;</span> gt<span class="sc">::</span><span class="fu">gt</span>() <span class="co"># kable(booktabs = TRUE)</span></span>
<span id="cb21-77"><a href="#cb21-77"></a><span class="in">```</span></span>
<span id="cb21-78"><a href="#cb21-78"></a></span>
<span id="cb21-79"><a href="#cb21-79"></a><span class="fu">## Tidy the data</span></span>
<span id="cb21-80"><a href="#cb21-80"></a></span>
<span id="cb21-81"><a href="#cb21-81"></a>In this next step I'm going to tidy the data and remove stop words. Then I'll take a look at word frequencies and TF-IDF metrics to get an idea of what I might expect from my model.</span>
<span id="cb21-82"><a href="#cb21-82"></a></span>
<span id="cb21-83"><a href="#cb21-83"></a>I'm first going to use the <span class="in">`tidytext::unnest_tokens()`</span> function to tokenize the data by single word then remove stop words from the text. I'll also get word frequencies in this one step. Also, I'm going to drop the project title for the time being, but I'll bring it back later.</span>
<span id="cb21-84"><a href="#cb21-84"></a></span>
<span id="cb21-87"><a href="#cb21-87"></a><span class="in">```{r}</span></span>
<span id="cb21-88"><a href="#cb21-88"></a><span class="co">#| label: tidy-data</span></span>
<span id="cb21-89"><a href="#cb21-89"></a></span>
<span id="cb21-90"><a href="#cb21-90"></a>jh_tidy <span class="ot">&lt;-</span> jh_clean <span class="sc">|&gt;</span></span>
<span id="cb21-91"><a href="#cb21-91"></a>  <span class="fu">mutate</span>(<span class="at">summary =</span> <span class="fu">str_c</span>(project_title, summary, <span class="at">sep =</span> <span class="st">" "</span>)) <span class="sc">|&gt;</span></span>
<span id="cb21-92"><a href="#cb21-92"></a>  <span class="fu">select</span>(<span class="sc">-</span>project_title) <span class="sc">|&gt;</span></span>
<span id="cb21-93"><a href="#cb21-93"></a>  <span class="fu">unnest_tokens</span>(word, summary, <span class="at">token =</span> <span class="st">"words"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-94"><a href="#cb21-94"></a>  <span class="fu">anti_join</span>(stop_words, <span class="at">by =</span> <span class="st">"word"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-95"><a href="#cb21-95"></a>  <span class="fu">count</span>(project_number, word)</span>
<span id="cb21-96"><a href="#cb21-96"></a></span>
<span id="cb21-97"><a href="#cb21-97"></a>jh_tidy <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|&gt;</span> <span class="fu">gt</span>()</span>
<span id="cb21-98"><a href="#cb21-98"></a><span class="in">```</span></span>
<span id="cb21-99"><a href="#cb21-99"></a></span>
<span id="cb21-100"><a href="#cb21-100"></a>The words "pain" is one of the most frequently occurring word in documents 1RF1NS113883-01 and 5U54DA049110-04 while the words "pain" and "sleep" seem to be 2 of the most frequent across documents. Let's see how these words do in terms of how important they are in distinguishing a document from other documents.</span>
<span id="cb21-101"><a href="#cb21-101"></a></span>
<span id="cb21-102"><a href="#cb21-102"></a>I'm going to add TF-IDF metrics using the <span class="in">`tidytext::bind_tf_idf()`</span> function.</span>
<span id="cb21-103"><a href="#cb21-103"></a></span>
<span id="cb21-106"><a href="#cb21-106"></a><span class="in">```{r}</span></span>
<span id="cb21-107"><a href="#cb21-107"></a><span class="co">#| label: add-tf-idf</span></span>
<span id="cb21-108"><a href="#cb21-108"></a></span>
<span id="cb21-109"><a href="#cb21-109"></a>jh_tfidf <span class="ot">&lt;-</span> jh_tidy <span class="sc">|&gt;</span> <span class="fu">bind_tf_idf</span>(word, project_number, n)</span>
<span id="cb21-110"><a href="#cb21-110"></a></span>
<span id="cb21-111"><a href="#cb21-111"></a>jh_tfidf <span class="sc">|&gt;</span></span>
<span id="cb21-112"><a href="#cb21-112"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>tf_idf) <span class="sc">|&gt;</span></span>
<span id="cb21-113"><a href="#cb21-113"></a>  <span class="fu">head</span>(<span class="dv">15</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-114"><a href="#cb21-114"></a>  <span class="fu">gt</span>()</span>
<span id="cb21-115"><a href="#cb21-115"></a><span class="in">```</span></span>
<span id="cb21-116"><a href="#cb21-116"></a></span>
<span id="cb21-117"><a href="#cb21-117"></a>It's very strange that 2 documents have the term "summary" as the only term in the summary. This is indicated by a term frequency (tf) of 1. Let's take a look at the original text for these documents.</span>
<span id="cb21-118"><a href="#cb21-118"></a></span>
<span id="cb21-121"><a href="#cb21-121"></a><span class="in">```{r}</span></span>
<span id="cb21-122"><a href="#cb21-122"></a><span class="co">#| label: check-summaries</span></span>
<span id="cb21-123"><a href="#cb21-123"></a></span>
<span id="cb21-124"><a href="#cb21-124"></a>jh_clean <span class="sc">|&gt;</span></span>
<span id="cb21-125"><a href="#cb21-125"></a>  <span class="fu">filter</span>(</span>
<span id="cb21-126"><a href="#cb21-126"></a>    project_number <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1R61HL156248-01"</span>, <span class="st">"3U24TR001609-04S1"</span>)</span>
<span id="cb21-127"><a href="#cb21-127"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-128"><a href="#cb21-128"></a>  <span class="fu">select</span>(project_number, summary) <span class="sc">|&gt;</span></span>
<span id="cb21-129"><a href="#cb21-129"></a>  <span class="fu">gt</span>()</span>
<span id="cb21-130"><a href="#cb21-130"></a><span class="in">```</span></span>
<span id="cb21-131"><a href="#cb21-131"></a></span>
<span id="cb21-132"><a href="#cb21-132"></a>There was no summary for either of these documents! The word "summary" had a really high TF-IDF because it was the only word ("no" is a stopword and was dropped) in these documents and it likely isn't used very frequently in other documents. This is one of the benefits of doing this kind of check before going into modeling. Interestingly, though, neither "pain" nor "stress" are in the terms with the top 15 TF-IDF values. I imagine it's because these words occur in a lot of the documents and, therefore, would not be very useful in distinguishing one project from another. So I'll drop the two project with no summaries and go into the modeling.</span>
<span id="cb21-133"><a href="#cb21-133"></a></span>
<span id="cb21-136"><a href="#cb21-136"></a><span class="in">```{r}</span></span>
<span id="cb21-137"><a href="#cb21-137"></a><span class="co">#| label: drop-no_summary</span></span>
<span id="cb21-138"><a href="#cb21-138"></a></span>
<span id="cb21-139"><a href="#cb21-139"></a>jh_tidy <span class="ot">&lt;-</span> jh_tidy <span class="sc">|&gt;</span></span>
<span id="cb21-140"><a href="#cb21-140"></a>  <span class="fu">filter</span>(</span>
<span id="cb21-141"><a href="#cb21-141"></a>    <span class="sc">!</span>project_number <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1R61HL156248-01"</span>, <span class="st">"3U24TR001609-04S1"</span>)</span>
<span id="cb21-142"><a href="#cb21-142"></a>  )</span>
<span id="cb21-143"><a href="#cb21-143"></a><span class="in">```</span></span>
<span id="cb21-144"><a href="#cb21-144"></a></span>
<span id="cb21-145"><a href="#cb21-145"></a><span class="fu">## Modeling</span></span>
<span id="cb21-146"><a href="#cb21-146"></a></span>
<span id="cb21-147"><a href="#cb21-147"></a>To be able to perform text mining of any kind, including structural topic modeling, I first need to put my data into a sparse matrix. For this I'll use the <span class="in">`tidytext::cast_sparse()`</span> function.</span>
<span id="cb21-148"><a href="#cb21-148"></a></span>
<span id="cb21-151"><a href="#cb21-151"></a><span class="in">```{r}</span></span>
<span id="cb21-152"><a href="#cb21-152"></a><span class="co">#| label: make-sparse-data</span></span>
<span id="cb21-153"><a href="#cb21-153"></a></span>
<span id="cb21-154"><a href="#cb21-154"></a>jh_sparse <span class="ot">&lt;-</span> jh_tidy <span class="sc">|&gt;</span> <span class="fu">cast_sparse</span>(project_number, word, n)</span>
<span id="cb21-155"><a href="#cb21-155"></a></span>
<span id="cb21-156"><a href="#cb21-156"></a><span class="fu">dim</span>(jh_sparse)</span>
<span id="cb21-157"><a href="#cb21-157"></a><span class="in">```</span></span>
<span id="cb21-158"><a href="#cb21-158"></a></span>
<span id="cb21-159"><a href="#cb21-159"></a>I now have a matrix of <span class="in">`r dim(jh_sparse)[1]`</span> and <span class="in">`r dim(jh_sparse)[2]`</span> columns. There is now one column for each distinct word in my corpus of data. I'm going to create a structural model with 3 topics (number chosen arbitrarily) just to get an idea of how I might evaluate a model. I'm going to use the <span class="in">`stm::stm()`</span> function and use the LDA algorithm to generate my model.</span>
<span id="cb21-160"><a href="#cb21-160"></a></span>
<span id="cb21-161"><a href="#cb21-161"></a><span class="in">```{r run-lda-3}</span></span>
<span id="cb21-162"><a href="#cb21-162"></a><span class="in">#| output: false</span></span>
<span id="cb21-163"><a href="#cb21-163"></a><span class="in">#| cache: true</span></span>
<span id="cb21-164"><a href="#cb21-164"></a></span>
<span id="cb21-165"><a href="#cb21-165"></a><span class="in">jh_lda_3 &lt;- jh_sparse |&gt;</span></span>
<span id="cb21-166"><a href="#cb21-166"></a><span class="in">  stm(K = 3, init.type = "LDA", seed = 212, verbose = FALSE)</span></span>
<span id="cb21-167"><a href="#cb21-167"></a><span class="in">```</span></span>
<span id="cb21-168"><a href="#cb21-168"></a></span>
<span id="cb21-169"><a href="#cb21-169"></a>Now I want to see what some of the most frequently occurring words are within each topic. For this I'm going to simply use the <span class="in">`tidy`</span> method from <span class="in">`stm`</span> on the model. By default, the tidy method extracts values of "beta" which tells us the probability that a word comes from a given topic.</span>
<span id="cb21-170"><a href="#cb21-170"></a></span>
<span id="cb21-173"><a href="#cb21-173"></a><span class="in">```{r}</span></span>
<span id="cb21-174"><a href="#cb21-174"></a><span class="co">#| label: lda_3-top-terms</span></span>
<span id="cb21-175"><a href="#cb21-175"></a></span>
<span id="cb21-176"><a href="#cb21-176"></a>jh_lda_3 <span class="sc">|&gt;</span></span>
<span id="cb21-177"><a href="#cb21-177"></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-178"><a href="#cb21-178"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span></span>
<span id="cb21-179"><a href="#cb21-179"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">10</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-180"><a href="#cb21-180"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb21-181"><a href="#cb21-181"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder_within</span>(term, beta, topic), beta, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb21-182"><a href="#cb21-182"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-183"><a href="#cb21-183"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb21-184"><a href="#cb21-184"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Beta"</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb21-185"><a href="#cb21-185"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb21-186"><a href="#cb21-186"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-187"><a href="#cb21-187"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb21-188"><a href="#cb21-188"></a><span class="in">```</span></span>
<span id="cb21-189"><a href="#cb21-189"></a></span>
<span id="cb21-190"><a href="#cb21-190"></a>The word "pain" is in the top 2 most frequently occurring words in each topic and the word "opioid" occurs in the top 10 words of 2 of the topics. It looks like the model's not doing a great job of separating topics based on this.</span>
<span id="cb21-191"><a href="#cb21-191"></a></span>
<span id="cb21-192"><a href="#cb21-192"></a>Another interesting metric to look at is "gamma" which is the probability that a given document is related to a given topic and this is also provided by our model output, which we can access by specifying the <span class="in">`matrix = "gamma"`</span> argument in our <span class="in">`tidy()`</span> function.</span>
<span id="cb21-193"><a href="#cb21-193"></a></span>
<span id="cb21-196"><a href="#cb21-196"></a><span class="in">```{r}</span></span>
<span id="cb21-197"><a href="#cb21-197"></a><span class="co">#| label: lda_3-topic-probs</span></span>
<span id="cb21-198"><a href="#cb21-198"></a></span>
<span id="cb21-199"><a href="#cb21-199"></a>jh_lda_3 <span class="sc">|&gt;</span></span>
<span id="cb21-200"><a href="#cb21-200"></a>  <span class="fu">tidy</span>(<span class="at">matrix =</span> <span class="st">"gamma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-201"><a href="#cb21-201"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">str_c</span>(<span class="st">"Topic"</span>, topic, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">factor</span>()) <span class="sc">|&gt;</span></span>
<span id="cb21-202"><a href="#cb21-202"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(document, gamma, <span class="at">fill =</span> topic)) <span class="sc">+</span></span>
<span id="cb21-203"><a href="#cb21-203"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-204"><a href="#cb21-204"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(<span class="fu">distinct</span>(jh_tidy, project_number))) <span class="sc">+</span></span>
<span id="cb21-205"><a href="#cb21-205"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb21-206"><a href="#cb21-206"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Document"</span>, <span class="at">y =</span> <span class="st">"Gamma"</span>) <span class="sc">+</span></span>
<span id="cb21-207"><a href="#cb21-207"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb21-208"><a href="#cb21-208"></a><span class="in">```</span></span>
<span id="cb21-209"><a href="#cb21-209"></a></span>
<span id="cb21-210"><a href="#cb21-210"></a>It looks like each document except for Document 16 has a high probability of coming from only 1 topic. This is pretty good considering what the beta values showed.</span>
<span id="cb21-211"><a href="#cb21-211"></a></span>
<span id="cb21-212"><a href="#cb21-212"></a>Next I'll see if there's a better number of topics to separate these documents into.</span>
<span id="cb21-213"><a href="#cb21-213"></a></span>
<span id="cb21-214"><a href="#cb21-214"></a><span class="fu">## Choosing a number of topics</span></span>
<span id="cb21-215"><a href="#cb21-215"></a></span>
<span id="cb21-216"><a href="#cb21-216"></a>First I'm going to build a set of LDA models with values of K (number of topics) ranging from 2 to 25. I'm also going to create a hold-out dataset to calculate the heldout-likelihood metric later. This is somewhat akin to using a cross-validation holdout set in other machine learning methodologies.</span>
<span id="cb21-217"><a href="#cb21-217"></a></span>
<span id="cb21-220"><a href="#cb21-220"></a><span class="in">```{r}</span></span>
<span id="cb21-221"><a href="#cb21-221"></a><span class="co">#| label: tune-models</span></span>
<span id="cb21-222"><a href="#cb21-222"></a><span class="co">#| output: false</span></span>
<span id="cb21-223"><a href="#cb21-223"></a><span class="co">#| cache: true</span></span>
<span id="cb21-224"><a href="#cb21-224"></a></span>
<span id="cb21-225"><a href="#cb21-225"></a>jh_tune_models <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">k =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-226"><a href="#cb21-226"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-227"><a href="#cb21-227"></a>    <span class="at">lda_mod =</span> <span class="fu">map</span>(</span>
<span id="cb21-228"><a href="#cb21-228"></a>      k,</span>
<span id="cb21-229"><a href="#cb21-229"></a>      \(x) <span class="fu">stm</span>(</span>
<span id="cb21-230"><a href="#cb21-230"></a>        jh_sparse,</span>
<span id="cb21-231"><a href="#cb21-231"></a>        <span class="at">K =</span> x,</span>
<span id="cb21-232"><a href="#cb21-232"></a>        <span class="at">init.type =</span> <span class="st">"LDA"</span>,</span>
<span id="cb21-233"><a href="#cb21-233"></a>        <span class="at">seed =</span> <span class="dv">212</span>,</span>
<span id="cb21-234"><a href="#cb21-234"></a>        <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="cb21-235"><a href="#cb21-235"></a>      )</span>
<span id="cb21-236"><a href="#cb21-236"></a>    )</span>
<span id="cb21-237"><a href="#cb21-237"></a>  )</span>
<span id="cb21-238"><a href="#cb21-238"></a></span>
<span id="cb21-239"><a href="#cb21-239"></a>heldout <span class="ot">&lt;-</span> <span class="fu">make.heldout</span>(jh_sparse)</span>
<span id="cb21-240"><a href="#cb21-240"></a><span class="in">```</span></span>
<span id="cb21-241"><a href="#cb21-241"></a></span>
<span id="cb21-242"><a href="#cb21-242"></a>Now I'm going to extract the metrics that I want to use to evaluate my model. I'm going to focus on the approach of find the value of K with high held-out likelihood and semantic coherence metrics, but I'm also interested in looking at the residual and exclusivity metrics, so I'll keep those as well.</span>
<span id="cb21-243"><a href="#cb21-243"></a></span>
<span id="cb21-246"><a href="#cb21-246"></a><span class="in">```{r}</span></span>
<span id="cb21-247"><a href="#cb21-247"></a><span class="co">#| label: get-tune-results</span></span>
<span id="cb21-248"><a href="#cb21-248"></a></span>
<span id="cb21-249"><a href="#cb21-249"></a>jh_tune_results <span class="ot">&lt;-</span> jh_tune_models <span class="sc">|&gt;</span></span>
<span id="cb21-250"><a href="#cb21-250"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-251"><a href="#cb21-251"></a>    <span class="at">exclusivity =</span> <span class="fu">map</span>(lda_mod, exclusivity),</span>
<span id="cb21-252"><a href="#cb21-252"></a>    <span class="at">semantic_coherence =</span> <span class="fu">map</span>(</span>
<span id="cb21-253"><a href="#cb21-253"></a>      lda_mod,</span>
<span id="cb21-254"><a href="#cb21-254"></a>      semanticCoherence,</span>
<span id="cb21-255"><a href="#cb21-255"></a>      <span class="at">documents =</span> jh_sparse,</span>
<span id="cb21-256"><a href="#cb21-256"></a>      <span class="at">M =</span> <span class="dv">10</span></span>
<span id="cb21-257"><a href="#cb21-257"></a>    ),</span>
<span id="cb21-258"><a href="#cb21-258"></a>    <span class="at">eval_heldout =</span> <span class="fu">map</span>(lda_mod, eval.heldout, heldout<span class="sc">$</span>missing),</span>
<span id="cb21-259"><a href="#cb21-259"></a>    <span class="at">residual =</span> <span class="fu">map</span>(lda_mod, checkResiduals, jh_sparse)</span>
<span id="cb21-260"><a href="#cb21-260"></a>  )</span>
<span id="cb21-261"><a href="#cb21-261"></a><span class="in">```</span></span>
<span id="cb21-262"><a href="#cb21-262"></a></span>
<span id="cb21-265"><a href="#cb21-265"></a><span class="in">```{r}</span></span>
<span id="cb21-266"><a href="#cb21-266"></a><span class="co">#| label: plot-tune-results</span></span>
<span id="cb21-267"><a href="#cb21-267"></a></span>
<span id="cb21-268"><a href="#cb21-268"></a>jh_tune_results <span class="sc">|&gt;</span></span>
<span id="cb21-269"><a href="#cb21-269"></a>  <span class="fu">transmute</span>(</span>
<span id="cb21-270"><a href="#cb21-270"></a>    k,</span>
<span id="cb21-271"><a href="#cb21-271"></a>    <span class="at">Residuals =</span> <span class="fu">map_dbl</span>(residual, <span class="st">"dispersion"</span>),</span>
<span id="cb21-272"><a href="#cb21-272"></a>    <span class="st">`</span><span class="at">Semantic coherence</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(semantic_coherence, mean),</span>
<span id="cb21-273"><a href="#cb21-273"></a>    <span class="st">`</span><span class="at">Held-out likelihood</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(eval_heldout, <span class="st">"expected.heldout"</span>),</span>
<span id="cb21-274"><a href="#cb21-274"></a>    <span class="at">Exclusivity =</span> <span class="fu">map_dbl</span>(exclusivity, mean)</span>
<span id="cb21-275"><a href="#cb21-275"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-276"><a href="#cb21-276"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>k, <span class="at">names_to =</span> <span class="st">"metrics"</span>, <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-277"><a href="#cb21-277"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(k, value, <span class="at">color =</span> metrics)) <span class="sc">+</span></span>
<span id="cb21-278"><a href="#cb21-278"></a>  <span class="fu">geom_line</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-279"><a href="#cb21-279"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Number of Topics"</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb21-280"><a href="#cb21-280"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> metrics, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb21-281"><a href="#cb21-281"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb21-282"><a href="#cb21-282"></a><span class="in">```</span></span>
<span id="cb21-283"><a href="#cb21-283"></a></span>
<span id="cb21-284"><a href="#cb21-284"></a>The highest held-out likelihood score comes from the model with <span class="in">`K = 17`</span> and the highest semantic coherence comes from the model with <span class="in">`K = 20`</span>, so there's a little bit of a trade-off. In this case I'm going to go with parsimony and choose the model with <span class="in">`K = 17`</span>. This model also has relatively high exclusivity. Notably, exclusivity and the residual seem to flatten out and semantic coherence increases dramatically at <span class="in">`K &gt; 10`</span>.</span>
<span id="cb21-285"><a href="#cb21-285"></a></span>
<span id="cb21-286"><a href="#cb21-286"></a>Now I'm going to look at both the <span class="in">`K = 17`</span> and <span class="in">`K = 20`</span> models to see whether one is clearly better. I'm going to start by looking at how easily each model would predict each document to belong to a specific topic. For that, I'm going to look at the maximum values of gamma for each document. For comparison I'm going to show the same plot for the approach of maximizing semantic coherence (<span class="in">`K = 21`</span>).</span>
<span id="cb21-287"><a href="#cb21-287"></a></span>
<span id="cb21-290"><a href="#cb21-290"></a><span class="in">```{r}</span></span>
<span id="cb21-291"><a href="#cb21-291"></a><span class="co">#| label: compare-gamma</span></span>
<span id="cb21-292"><a href="#cb21-292"></a></span>
<span id="cb21-293"><a href="#cb21-293"></a>jh_tune_models <span class="sc">|&gt;</span> </span>
<span id="cb21-294"><a href="#cb21-294"></a>  <span class="fu">filter</span>(k <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">17</span>, <span class="dv">20</span>)) <span class="sc">|&gt;</span></span>
<span id="cb21-295"><a href="#cb21-295"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-296"><a href="#cb21-296"></a>    <span class="at">max_gammas =</span> <span class="fu">map</span>(</span>
<span id="cb21-297"><a href="#cb21-297"></a>      lda_mod,</span>
<span id="cb21-298"><a href="#cb21-298"></a>      \(x) <span class="fu">tidy</span>(x, <span class="at">matrix =</span> <span class="st">"gamma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-299"><a href="#cb21-299"></a>        <span class="fu">group_by</span>(document) <span class="sc">|&gt;</span></span>
<span id="cb21-300"><a href="#cb21-300"></a>        <span class="fu">summarise</span>(<span class="at">gamma =</span> <span class="fu">max</span>(gamma), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb21-301"><a href="#cb21-301"></a>    ),</span>
<span id="cb21-302"><a href="#cb21-302"></a>    <span class="at">k_label =</span> <span class="fu">str_c</span>(<span class="st">"Number of Topics:"</span>, k, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">fct_reorder</span>(k)</span>
<span id="cb21-303"><a href="#cb21-303"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-304"><a href="#cb21-304"></a>  <span class="fu">select</span>(<span class="sc">-</span>lda_mod) <span class="sc">|&gt;</span></span>
<span id="cb21-305"><a href="#cb21-305"></a>  <span class="fu">unnest</span>(max_gammas) <span class="sc">|&gt;</span></span>
<span id="cb21-306"><a href="#cb21-306"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(document, gamma, <span class="at">fill =</span> <span class="fu">factor</span>(k))) <span class="sc">+</span></span>
<span id="cb21-307"><a href="#cb21-307"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-308"><a href="#cb21-308"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>) <span class="sc">+</span></span>
<span id="cb21-309"><a href="#cb21-309"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Document"</span>, <span class="at">y =</span> <span class="st">"Maximum Gamma"</span>) <span class="sc">+</span></span>
<span id="cb21-310"><a href="#cb21-310"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> k_label, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb21-311"><a href="#cb21-311"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb21-312"><a href="#cb21-312"></a><span class="in">```</span></span>
<span id="cb21-313"><a href="#cb21-313"></a></span>
<span id="cb21-314"><a href="#cb21-314"></a>It looks like both models yield relatively high probabilities that each document corresponds to one specific topic across the board with only documents 23 and 24 having maximum gammas below 0.75, but the model with <span class="in">`K = 17`</span> generally performs a bit better.</span>
<span id="cb21-315"><a href="#cb21-315"></a></span>
<span id="cb21-316"><a href="#cb21-316"></a>For the purposes of visualization I'll look at the top 5 words defining the topics for the 17-topic model.</span>
<span id="cb21-317"><a href="#cb21-317"></a></span>
<span id="cb21-320"><a href="#cb21-320"></a><span class="in">```{r}</span></span>
<span id="cb21-321"><a href="#cb21-321"></a><span class="co">#| label: lda_17-top-words</span></span>
<span id="cb21-322"><a href="#cb21-322"></a></span>
<span id="cb21-323"><a href="#cb21-323"></a>jh_tune_models <span class="sc">|&gt;</span> </span>
<span id="cb21-324"><a href="#cb21-324"></a>  <span class="fu">filter</span>(k <span class="sc">==</span> <span class="dv">17</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-325"><a href="#cb21-325"></a>  <span class="fu">pluck</span>(<span class="st">"lda_mod"</span>, <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-326"><a href="#cb21-326"></a>  <span class="fu">tidy</span>() <span class="sc">|&gt;</span></span>
<span id="cb21-327"><a href="#cb21-327"></a>  <span class="fu">group_by</span>(topic) <span class="sc">|&gt;</span></span>
<span id="cb21-328"><a href="#cb21-328"></a>  <span class="fu">slice_max</span>(beta, <span class="at">n =</span> <span class="dv">5</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-329"><a href="#cb21-329"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb21-330"><a href="#cb21-330"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-331"><a href="#cb21-331"></a>    <span class="at">topic =</span> <span class="fu">str_c</span>(<span class="st">"Topic"</span>, topic, <span class="at">sep =</span> <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-332"><a href="#cb21-332"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">str_c</span>(<span class="st">"Topic"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">17</span>, <span class="at">sep =</span> <span class="st">" "</span>))</span>
<span id="cb21-333"><a href="#cb21-333"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-334"><a href="#cb21-334"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">reorder_within</span>(term, beta, topic), beta, <span class="at">fill =</span> <span class="fu">factor</span>(topic))) <span class="sc">+</span></span>
<span id="cb21-335"><a href="#cb21-335"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-336"><a href="#cb21-336"></a>  <span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb21-337"><a href="#cb21-337"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Beta"</span>, <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb21-338"><a href="#cb21-338"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> topic, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb21-339"><a href="#cb21-339"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb21-340"><a href="#cb21-340"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb21-341"><a href="#cb21-341"></a><span class="in">```</span></span>
<span id="cb21-342"><a href="#cb21-342"></a></span>
<span id="cb21-343"><a href="#cb21-343"></a>The word "pain" appears in the top 5 words of 7 topics; in further analysis I might consider making this a stop word along with words like "study" and "research". But topic 11 seems to be about joint issues given the prevalence of the words "osteoarthritis" and "knee"; topic 12 seems to be about demographics with words like "american" and "urban" in the top 5 words; and topic 17 seems to be clearly about digestion issues with words like "pain", "ibs", and "abdominal" in the top 5 words.</span>
<span id="cb21-344"><a href="#cb21-344"></a></span>
<span id="cb21-345"><a href="#cb21-345"></a>Finally, I'll look at the titles grouped by each project's maximum gamma value. You be the judge.</span>
<span id="cb21-346"><a href="#cb21-346"></a></span>
<span id="cb21-349"><a href="#cb21-349"></a><span class="in">```{r}</span></span>
<span id="cb21-350"><a href="#cb21-350"></a><span class="co">#| label: show-final-gamma</span></span>
<span id="cb21-351"><a href="#cb21-351"></a></span>
<span id="cb21-352"><a href="#cb21-352"></a>jh_tune_models <span class="sc">|&gt;</span> </span>
<span id="cb21-353"><a href="#cb21-353"></a>  <span class="fu">filter</span>(k <span class="sc">==</span> <span class="dv">17</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-354"><a href="#cb21-354"></a>  <span class="fu">pluck</span>(<span class="st">"lda_mod"</span>, <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-355"><a href="#cb21-355"></a>  <span class="fu">tidy</span>(<span class="at">matrix =</span> <span class="st">"gamma"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-356"><a href="#cb21-356"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>document) <span class="sc">|&gt;</span></span>
<span id="cb21-357"><a href="#cb21-357"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-358"><a href="#cb21-358"></a>    <span class="at">data =</span> <span class="fu">map</span>(data,\(x) <span class="fu">slice_max</span>(x, gamma, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb21-359"><a href="#cb21-359"></a>    <span class="at">project_number =</span> <span class="fu">rownames</span>(jh_sparse)</span>
<span id="cb21-360"><a href="#cb21-360"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-361"><a href="#cb21-361"></a>  <span class="fu">unnest</span>(data) <span class="sc">|&gt;</span></span>
<span id="cb21-362"><a href="#cb21-362"></a>  <span class="fu">left_join</span>(</span>
<span id="cb21-363"><a href="#cb21-363"></a>    jh_clean <span class="sc">|&gt;</span> <span class="fu">select</span>(project_number, project_title),</span>
<span id="cb21-364"><a href="#cb21-364"></a>    <span class="at">by =</span> <span class="st">"project_number"</span></span>
<span id="cb21-365"><a href="#cb21-365"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb21-366"><a href="#cb21-366"></a>  <span class="fu">select</span>(topic, project_title, gamma) <span class="sc">|&gt;</span></span>
<span id="cb21-367"><a href="#cb21-367"></a>  <span class="fu">mutate</span>(<span class="at">gamma =</span> <span class="fu">round</span>(gamma, <span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb21-368"><a href="#cb21-368"></a>  <span class="fu">arrange</span>(topic, gamma) <span class="sc">|&gt;</span></span>
<span id="cb21-369"><a href="#cb21-369"></a>  <span class="fu">gt</span>()</span>
<span id="cb21-370"><a href="#cb21-370"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>